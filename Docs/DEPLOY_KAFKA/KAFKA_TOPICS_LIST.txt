â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ DANH SÃCH KAFKA TOPICS TRONG PROJECT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ¯ Táº¤T Cáº¢ TOPICS Cáº¦N Táº O TRÃŠN CONFLUENT CLOUD

1. order.create
2. order.expired
3. order.retry.payment
4. order.confirmed
5. payment.event
6. product.sync
7. inventory.reserve.result

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
## ğŸ“Š CHI TIáº¾T TOPICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### 1. order.create
**Producer**: Order Service
**Consumers**: Payment Service, Product Service
**Má»¥c Ä‘Ã­ch**: ThÃ´ng bÃ¡o khi order má»›i Ä‘Æ°á»£c táº¡o
**Data**: orderId, userId, amount, items, restaurantId

### 2. order.expired
**Producer**: Order Service
**Consumers**: Payment Service
**Má»¥c Ä‘Ã­ch**: ThÃ´ng bÃ¡o khi order háº¿t háº¡n thanh toÃ¡n
**Data**: orderId, userId, expiredAt

### 3. order.retry.payment
**Producer**: Order Service
**Consumers**: Payment Service
**Má»¥c Ä‘Ã­ch**: YÃªu cáº§u táº¡o láº¡i payment URL cho order
**Data**: orderId, userId, amount

### 4. order.confirmed
**Producer**: Order Service
**Consumers**: Restaurant Service
**Má»¥c Ä‘Ã­ch**: ThÃ´ng bÃ¡o order Ä‘Ã£ thanh toÃ¡n thÃ nh cÃ´ng
**Data**: orderId, userId, items, restaurantId, deliveryInfo

### 5. payment.event
**Producer**: Payment Service
**Consumers**: Order Service, Notification Service
**Má»¥c Ä‘Ã­ch**: ThÃ´ng bÃ¡o káº¿t quáº£ thanh toÃ¡n (success/failed/cancelled)
**Data**: orderId, userId, email, amount, paymentStatus, paymentIntentId

### 6. product.sync
**Producer**: Product Service
**Consumers**: Order Service
**Má»¥c Ä‘Ã­ch**: Äá»“ng bá»™ thÃ´ng tin sáº£n pháº©m
**Data**: productId, name, price, restaurantId, status

### 7. inventory.reserve.result
**Producer**: Product Service
**Consumers**: Order Service
**Má»¥c Ä‘Ã­ch**: Káº¿t quáº£ reserve inventory
**Data**: orderId, items, reserved, failedItems

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
## ğŸ”„ LUá»’NG MESSAGE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User táº¡o order:
  â†’ Order Service produces: order.create
  â†’ Payment Service consumes â†’ Táº¡o PaymentIntent
  â†’ Product Service consumes â†’ Reserve inventory

Product Service:
  â†’ Produces: inventory.reserve.result
  â†’ Order Service consumes â†’ Update order status

User thanh toÃ¡n VNPay:
  â†’ VNPay IPN â†’ Payment Service
  â†’ Payment Service produces: payment.event
  â†’ Order Service consumes â†’ Update order status
  â†’ Notification Service consumes â†’ Gá»­i email

Order thanh toÃ¡n thÃ nh cÃ´ng:
  â†’ Order Service produces: order.confirmed
  â†’ Restaurant Service consumes â†’ Chuáº©n bá»‹ mÃ³n

Order háº¿t háº¡n:
  â†’ Order Service produces: order.expired
  â†’ Payment Service consumes â†’ Cancel payment

Retry payment:
  â†’ Order Service produces: order.retry.payment
  â†’ Payment Service consumes â†’ Táº¡o payment URL má»›i

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
## âš™ï¿½ï¿½ï¿½ Cáº¤U HÃŒNH Äá»€ XUáº¤T CHO CONFLUENT CLOUD
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Partitions: 3 (cho má»—i topic)
Replication Factor: 3 (náº¿u cluster cÃ³ â‰¥3 brokers)
Retention Time: 7 days (168 hours)
Cleanup Policy: delete

**LÃ½ do:**
- 3 partitions: Äá»§ cho parallel processing, scale tá»‘t
- 7 days retention: Äá»§ Ä‘á»ƒ debug vÃ  replay náº¿u cáº§n
- Delete policy: Tá»± Ä‘á»™ng xÃ³a message cÅ©, tiáº¿t kiá»‡m storage

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
## ğŸ” CONSUMER GROUPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

payment-service-group (Payment Service)
order-service-group (Order Service)
notification-service-group (Notification Service)
restaurant-service-group (Restaurant Service)
product-service-group (Product Service)

**LÆ°u Ã½**: Má»—i service cÃ³ consumer group riÃªng Ä‘á»ƒ:
- Má»—i service nháº­n Ä‘áº§y Ä‘á»§ message
- KhÃ´ng bá»‹ conflict khi scale multiple instances
- Dá»… monitor vÃ  debug

